<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HomePathways Assessment | Deep Diagnostic</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        .loading-bar { animation: progress 60s linear forwards; }
        @keyframes progress { from { width: 0%; } to { width: 100%; } }
    </style>
</head>
<body class="bg-[#050b1a] text-gray-200 antialiased font-sans">
    <div class="min-h-screen flex items-center justify-center p-6">
        <div id="quiz-container" class="max-w-2xl w-full bg-slate-900/50 border border-slate-800 p-8 md:p-12 rounded-[40px] shadow-2xl">
            
            <div id="progress-header" class="mb-12">
                <div class="flex justify-between text-[10px] uppercase tracking-[0.2em] text-amber-400 font-bold mb-4">
                    <span id="pillar-name">Emotional Why</span>
                    <span id="q-count">Question 1 of 25</span>
                </div>
                <div class="h-1 w-full bg-slate-800 rounded-full overflow-hidden">
                    <div id="progress-fill" class="h-full bg-amber-400 transition-all duration-300" style="width: 4%"></div>
                </div>
            </div>

            <div id="question-area">
                <h2 id="question-text" class="text-2xl md:text-3xl font-bold text-white mb-8 leading-tight"></h2>
                <div id="options-grid" class="grid gap-4"></div>
            </div>

            <div id="email-capture" class="hidden text-center">
                <h2 class="text-3xl font-bold text-white mb-4">Your Roadmap is Ready</h2>
                <p class="text-slate-400 mb-10">Enter your email to generate your deep transition report.</p>
                <input type="email" id="user-email" placeholder="Email Address" class="w-full bg-black border border-slate-700 rounded-2xl p-5 mb-6 text-white focus:border-amber-400 outline-none">
                <button onclick="startAnalysis()" class="w-full bg-amber-400 text-black font-bold py-5 rounded-2xl hover:bg-white transition-all">Generate My Report</button>
            </div>

            <div id="loading-screen" class="hidden text-center py-10">
                <div class="inline-block animate-spin w-12 h-12 border-4 border-amber-400 border-t-transparent rounded-full mb-8"></div>
                <h2 class="text-2xl font-bold text-white mb-4">Conducting Deep Analysis...</h2>
                <p class="text-slate-400 mb-10 italic">Scanning your emotional, logical, and financial readiness markers.</p>
                <div class="h-2 w-full bg-slate-800 rounded-full overflow-hidden">
                    <div class="loading-bar h-full bg-amber-400"></div>
                </div>
                <p class="mt-4 text-[10px] uppercase tracking-widest text-slate-500">Estimated time: 60 seconds</p>
            </div>

        </div>
    </div>

    <script>
        const params = new URLSearchParams(window.location.search);
        const persona = params.get('type') || 'first-buyer';

        // THE 25 QUESTIONS (Example: First-Time Buyer)
        const questions = [
            /* Emotional Why */
            { p: "Emotional Why", q: "When you think about owning a home, is it about 'safety' or 'showing people you made it'?", o: ["Safety and roots", "Success and status", "A bit of both", "I'm not sure"] },
            { p: "Emotional Why", q: "Does your current rent feel like a 'payment' or a 'gift' to your landlord?", o: ["A necessary payment", "Gifting them equity", "Total waste", "I don't think about it"] },
            { p: "Emotional Why", q: "How much does not owning a home affect your sleep or stress levels?", o: ["Not at all", "A little bit", "Quite a lot", "Constant worry"] },
            { p: "Emotional Why", q: "Do you feel like a 'guest' in your current living situation?", o: ["Yes, always", "Sometimes", "No, it's home for now", "Never"] },
            { p: "Emotional Why", q: "If you could paint a wall tomorrow without asking, how would that make you feel?", o: ["Relieved", "Powerful", "Happy", "Indifferent"] },
            /* Cost of Inaction */
            { p: "Cost of Inaction", q: "If you wait 12 months and prices go up 5%, how does that make you feel?", o: ["Panicked", "Annoyed", "Fine with it", "I'll wait anyway"] },
            { p: "Cost of Inaction", q: "Are you staying in a small place just to save money, or because you're scared to move?", o: ["Saving money", "Scared to move", "Both", "Neither"] },
            /* ... (I will keep the logic for 25 questions, add yours here) ... */
        ];

        // Fill remaining slots for demo purposes
        while(questions.length < 25) {
            questions.push({ p: "Pillar", q: "Question " + (questions.length + 1), o: ["Option A", "Option B", "Option C", "Option D"] });
        }

        let currentQ = 0;
        let scores = { c1: 0, c2: 0, c3: 0, c4: 0, c5: 0 };

        function renderQuestion() {
            const q = questions[currentQ];
            document.getElementById('pillar-name').innerText = q.p;
            document.getElementById('q-count').innerText = `Question ${currentQ + 1} of 25`;
            document.getElementById('progress-fill').style.width = `${((currentQ + 1) / 25) * 100}%`;
            document.getElementById('question-text').innerText = q.q;
            
            const grid = document.getElementById('options-grid');
            grid.innerHTML = '';
            q.o.forEach((opt, i) => {
                const btn = document.createElement('button');
                btn.className = "w-full text-left p-6 rounded-2xl border border-slate-800 bg-slate-900/30 hover:border-amber-400 transition-all text-white";
                btn.innerText = opt;
                btn.onclick = () => handleAnswer(i);
                grid.appendChild(btn);
            });
        }

        function handleAnswer(index) {
            // Scoring logic: 0 index = 4pts, 1 = 3pts, etc.
            const pillarKey = `c${Math.floor(currentQ / 5) + 1}`;
            scores[pillarKey] += (4 - index);

            if (currentQ < 24) {
                currentQ++;
                renderQuestion();
            } else {
                document.getElementById('question-area').classList.add('hidden');
                document.getElementById('progress-header').classList.add('hidden');
                document.getElementById('email-capture').classList.remove('hidden');
            }
        }

        function startAnalysis() {
            const email = document.getElementById('user-email').value;
            if(!email.includes('@')) return alert("Please enter a valid email.");
            
            document.getElementById('email-capture').classList.add('hidden');
            document.getElementById('loading-screen').classList.remove('hidden');

            // Wait 60 seconds then redirect
            setTimeout(() => {
                const finalScores = `?c1=${scores.c1}&c2=${scores.c2}&c3=${scores.c3}&c4=${scores.c4}&c5=${scores.c5}`;
                window.location.href = 'report.html' + finalScores;
            }, 60000);
        }

        renderQuestion();
    </script>
</body>
</html>