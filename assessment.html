<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HomePathways | Transition Assessment</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-[#0A0F1D] text-gray-200 font-sans antialiased">
    <div class="max-w-3xl mx-auto px-4 py-12">
        <div id="quiz-container" class="bg-slate-900/50 border border-slate-800 rounded-3xl p-8 md:p-12 shadow-2xl min-h-[500px] flex flex-col justify-center">
            
            <div id="top-progress-container" class="w-full bg-slate-800 rounded-full h-1.5 mb-10">
                <div id="progress" class="bg-amber-400 h-1.5 rounded-full transition-all duration-500" style="width: 0%"></div>
            </div>

            <div id="question-box">
                <span id="category-tag" class="text-amber-400/60 text-xs font-bold uppercase tracking-widest mb-2 block"></span>
                <h2 id="question-text" class="text-2xl md:text-3xl font-bold text-white mb-8 leading-tight"></h2>
                <div id="options" class="grid gap-4"></div>
            </div>
        </div>
    </div>

    <script>
        // Data for Card 1: First-Time Buyer Assessment (21 Questions)
        const questions = [
            { q: "Which word best describes your mood about buying a home?", cat: "Emotional", o: ["Excited!", "Nervous", "Overwhelmed", "Frustrated"] },
            { q: "What is the biggest pain point in your current living situation?", cat: "Logical", o: ["Equity building", "Zero freedom", "Space is too small", "Instability"] },
            { q: "What is the one thing keeping you up at night about this purchase?", cat: "Psychological", o: ["Monthly payments", "Hidden repairs", "Process confusion", "Commitment fear"] },
            { q: "Have you dipped your toes into the financial side yet?", cat: "Logical", o: ["Pre-approval ready", "Used calculators", "Afraid to check credit", "No idea on budget"] },
            { q: "If a pipe leaks or a wall needs painting, what’s your reaction?", cat: "Psychological", o: ["Love DIY!", "Handle minor stuff", "Need help/YouTube", "Move-in ready only"] },
            { q: "How long do you see yourself living in this first home?", cat: "Logical", o: ["1–3 years", "5–7 years", "10+ years", "Forever"] },
            { q: "What is the most important 'lifestyle feature' you need?", cat: "Emotional", o: ["Walkability", "Outdoor space", "Short commute", "Peace & quiet"] },
            { q: "Where do you stand regarding a down payment?", cat: "Logical", o: ["Full 20% saved", "5-10% saved", "Gift from family", "Researching options"] },
            { q: "Who else is involved in this big decision?", cat: "Emotional", o: ["Just me", "Partner/Spouse", "Partner & Kids", "Parents/Friends"] },
            { q: "Perfect house at the top of your budget—what do you do?", cat: "Psychological", o: ["Make the offer", "Hesitate/Bills fear", "Consult my agent", "Walk away"] },
            { q: "What is your absolute 'Deal Breaker'?", cat: "Logical", o: ["Bad commute", "No parking", "High strata fees", "Safety concerns"] },
            { q: "Moved in 3 months—what are you doing Saturday morning?", cat: "Emotional", o: ["Coffee on my deck", "Hosting brunch", "Garden project", "Sleeping in"] },
            { q: "How much does private outdoor space impact your well-being?", cat: "Psychological", o: ["Essential", "Nice to have", "Don't care", "No yard work"] },
            { q: "How much does 'clutter' affect your daily stress levels?", cat: "Logical", o: ["Significant", "Moderate", "Minor", "Not at all"] },
            { q: "Do you view this home as a financial asset or a sanctuary?", cat: "Logical", o: ["Financial asset", "Personal sanctuary", "Both equally", "Neither yet"] },
            { q: "Comfort level with a rental suite to help with mortgage?", cat: "Psychological", o: ["Very comfortable", "Maybe", "Uncomfortable", "Absolutely not"] },
            { q: "Idea of living in a construction zone during renovations?", cat: "Psychological", o: ["Exciting project", "Tolerable", "Stressful", "Deal-breaker"] },
            { q: "Importance of 'Community Vibe' to your sense of belonging?", cat: "Emotional", o: ["Very important", "Somewhat", "Neutral", "Privacy matters"] },
            { q: "Need for easy access to parks and natural trails?", cat: "Emotional", o: ["Daily need", "Weekly use", "Occasionally", "Not important"] },
            { q: "How safe must you feel to fully relax in your own home?", cat: "Psychological", o: ["Extremely safe", "Generally safe", "Adaptable", "Prefer secure"] },
            { q: "How ready are you for the responsibility of homeownership?", cat: "Emotional", o: ["100% Ready", "Mostly ready", "A bit nervous", "Just researching"] }
        ];

        let currentQ = 0;
        let scores = { Emotional: 0, Psychological: 0, Logical: 0 };

        function showQuestion() {
            const q = questions[currentQ];
            document.getElementById('category-tag').innerText = q.cat;
            document.getElementById('question-text').innerText = q.q;
            const optionsDiv = document.getElementById('options');
            optionsDiv.innerHTML = '';
            
            q.o.forEach((opt) => {
                const btn = document.createElement('button');
                btn.className = "w-full text-left p-5 rounded-2xl border border-slate-800 bg-slate-900/30 hover:border-amber-400/50 hover:bg-slate-800 transition-all flex justify-between items-center group";
                btn.innerHTML = `<span>${opt}</span><span class="opacity-0 group-hover:opacity-100 text-amber-400 transition-opacity">→</span>`;
                btn.onclick = () => { 
                    scores[q.cat]++; 
                    currentQ++; 
                    if (currentQ < questions.length) {
                        showQuestion();
                    } else {
                        showLeadCapture();
                    }
                };
                optionsDiv.appendChild(btn);
            });
            document.getElementById('progress').style.width = ((currentQ + 1) / questions.length * 100) + "%";
        }

        function showLeadCapture() {
            // Hide the progress bar for the final step
            document.getElementById('top-progress-container').classList.add('hidden');
            document.getElementById('quiz-container').innerHTML = `
                <div class="text-center">
                    <h2 class="text-3xl font-bold text-white mb-4">Your Roadmap is Ready</h2>
                    <p class="text-slate-400 mb-10 leading-relaxed">Enter your email to receive your custom report on your Emotional, Psychological, and Logical readiness.</p>
                    <input type="email" id="userEmail" placeholder="Email Address" class="w-full p-5 rounded-2xl bg-black/40 border border-slate-800 mb-4 focus:border-amber-400 outline-none text-white transition-colors">
                    <button onclick="submitLead()" class="w-full bg-amber-400 text-slate-950 font-bold py-5 rounded-2xl hover:bg-white transition-all shadow-xl shadow-amber-400/10">Analyze My Results</button>
                </div>`;
        }

        function submitLead() {
            const email = document.getElementById('userEmail').value;
            if(!email) return alert("Please enter your email.");

            showLoadingState();

            const urlParams = `?email=${email}&e=${scores.Emotional}&p=${scores.Psychological}&l=${scores.Logical}`;

            let timeLeft = 60;
            const messages = [
                "Scanning your emotional readiness markers...",
                "Identifying psychological 'sanctuary' requirements...",
                "Mapping logical financial milestones...",
                "Synthesizing your heart-to-home connection...",
                "Finalizing your non-judging transition roadmap..."
            ];

            const progressInterval = setInterval(() => {
                timeLeft--;
                const percent = ((60 - timeLeft) / 60) * 100;
                const loadingBar = document.getElementById('loading-bar');
                if (loadingBar) loadingBar.style.width = percent + "%";
                
                if (timeLeft % 12 === 0) {
                    const msgIndex = Math.floor((60 - timeLeft) / 12);
                    const loadingText = document.getElementById('loading-text');
                    if(loadingText && messages[msgIndex]) {
                        loadingText.innerText = messages[msgIndex];
                    }
                }

                if (timeLeft <= 0) {
                    clearInterval(progressInterval);
                    window.location.href = 'report.html' + urlParams;
                }
            }, 1000);
        }

        function showLoadingState() {
            document.getElementById('quiz-container').innerHTML = `
                <div class="text-center py-12">
                    <div class="mb-10 relative inline-block">
                        <div class="animate-spin rounded-full h-28 w-28 border-t-2 border-b-2 border-amber-400"></div>
                        <div class="absolute top-0 left-0 h-28 w-28 rounded-full bg-amber-400/5 animate-pulse flex items-center justify-center">
                            <svg class="w-10 h-10 text-amber-400/40" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1" d="M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"></path>
                            </svg>
                        </div>
                    </div>
                    <h2 class="text-2xl font-bold text-white mb-3">Conducting Deep Analysis</h2>
                    <p id="loading-text" class="text-amber-400/90 font-medium mb-10 italic tracking-wide">Scanning your emotional readiness markers...</p>
                    <div class="max-w-xs mx-auto bg-slate-800 rounded-full h-1.5 mb-6">
                        <div id="loading-bar" class="bg-amber-400 h-1.5 rounded-full transition-all duration-1000 shadow-[0_0_15px_rgba(251,191,36,0.3)]" style="width: 0%"></div>
                    </div>
                    <div class="space-y-2">
                        <p class="text-slate-500 text-[10px] uppercase tracking-[0.3em]">Precision Analysis Engine Active</p>
                        <p class="text-slate-600 text-xs italic">Please keep this window open while we build your roadmap.</p>
                    </div>
                </div>
            `;
        }

        showQuestion();
    </script>
</body>
</html>